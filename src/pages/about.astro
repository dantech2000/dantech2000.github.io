---
import Content from '~/components/widgets/Content.astro';
import Features2 from '~/components/widgets/Features2.astro';
import Hero from '~/components/widgets/Hero.astro';
import Stats from '~/components/widgets/Stats.astro';
import Layout from '~/layouts/PageLayout.astro';
import { Icon } from 'astro-icon/components';

import { personalInfo, skills, certifications, languages } from '~/data/resume';

const metadata = {
  title: `About - ${personalInfo.name}`,
  description: personalInfo.summary,
};

// Calculate years of experience (started March 2008)
const startYear = 2008;
const currentYear = new Date().getFullYear();
const yearsExperience = currentYear - startYear;

// Transform skills for display
const skillItems = skills.slice(0, 6).map((category) => ({
  title: category.category,
  description: category.skills.map((s) => s.name).join(', '),
  icon: category.icon || 'tabler:check',
}));
---

<Layout metadata={metadata}>
  <!-- Hero Section -->
  <Hero>
    <Fragment slot="title">
      Hi, I'm <span class="text-accent dark:text-white">{personalInfo.name}</span>
    </Fragment>

    <Fragment slot="subtitle">
      <span class="font-semibold">{personalInfo.title}</span> based in {personalInfo.location}
    </Fragment>

    <Fragment slot="content">
      <div class="flex justify-center mt-8">
        <img
          src="https://github.com/dantech2000.png"
          alt={personalInfo.name}
          class="w-48 h-48 rounded-full shadow-lg border-4 border-primary/20 dark:border-blue-200/20"
        />
      </div>
    </Fragment>
  </Hero>

  <!-- About Me Section -->
  <Content
    id="about"
    columns={1}
    items={[]}
    image={{
      src: 'https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1740&q=80',
      alt: 'Server room with blue lights',
    }}
  >
    <Fragment slot="content">
      <h2 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-4">About Me</h2>
      <p class="text-muted mb-6">
        {personalInfo.summary}
      </p>
      <p class="text-muted mb-6">
        My journey in tech started back in 2008 when I joined Western Dental as an IT Help Desk technician. 
        Since then, I've grown through various roles - from CloudTech Support to Cloud Engineer, 
        Site Reliability Engineer, and now DevOps Engineer at Codecademy.
      </p>
      <p class="text-muted">
        I'm passionate about automation, infrastructure as code, and building reliable systems that scale. 
        When I'm not working on cloud infrastructure or debugging production issues, 
        I enjoy exploring new technologies and contributing to the DevOps community.
      </p>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- Stats Section -->
  <Stats
    title="By the Numbers"
    stats={[
      { title: 'Years Experience', amount: `${yearsExperience}+` },
      { title: 'Companies', amount: '4' },
      { title: 'Certifications', amount: `${certifications.length}` },
      { title: 'Languages Spoken', amount: `${languages.length}` },
    ]}
  />

  <!-- Core Skills Section -->
  <Features2
    id="skills"
    title="Core Expertise"
    subtitle="The technologies and practices I specialize in"
    tagline="What I Do"
    columns={3}
    items={skillItems}
  />

  <!-- What I Bring Section -->
  <Content
    isReversed
    items={[
      {
        title: 'Cloud Infrastructure',
        description: 'Deep expertise in AWS services including EKS, RDS, Lambda, and CloudFormation. Experience with multi-cloud environments and CloudFlare.',
        icon: 'tabler:cloud',
      },
      {
        title: 'Automation & CI/CD',
        description: 'Building robust deployment pipelines with GitHub Actions, Jenkins, and CircleCI. Infrastructure automation with Terraform and Ansible.',
        icon: 'tabler:robot',
      },
      {
        title: 'Reliability & Monitoring',
        description: 'Implementing observability solutions with DataDog, Grafana, and Prometheus. On-call experience and incident response expertise.',
        icon: 'tabler:chart-line',
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1551434678-e076c223a692?ixlib=rb-4.0.3&auto=format&fit=crop&w=1740&q=80',
      alt: 'Team collaboration',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">What I Bring to the Table</h3>
      <p class="text-muted mb-6">
        With over {yearsExperience} years in the industry, I've developed a strong foundation in building 
        and maintaining reliable infrastructure at scale.
      </p>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- Projects Section -->
  <Features2
    id="projects"
    title="Projects"
    subtitle="Open source projects and tools I maintain"
    tagline="My Work"
    columns={2}
    items={[
      {
        title: 'Refresh',
        description: 'A Go-based CLI tool to manage and monitor AWS EKS clusters and nodegroups with health checks, fast list/describe operations, and smart scaling.',
        icon: 'tabler:brand-golang',
        callToAction: {
          text: 'View on GitHub',
          href: 'https://github.com/dantech2000/refresh',
          target: '_blank',
        },
      },
      {
        title: 'flake.nix',
        description: 'Personal Nix configuration for macOS using nix-darwin and Home Manager. Provides a declarative way to manage system and user-level configurations with a modular structure.',
        icon: 'tabler:snowflake',
        callToAction: {
          text: 'View on GitHub',
          href: 'https://github.com/dantech2000/flake.nix',
          target: '_blank',
        },
      },
    ]}
  />

  <!-- Connect Section -->
  <div class="py-12 md:py-20">
    <div class="max-w-3xl mx-auto text-center px-4">
      <h2 class="text-3xl font-bold tracking-tight dark:text-white mb-4">Let's Connect</h2>
      <p class="text-muted mb-8">
        I'm always interested in discussing DevOps practices, cloud architecture, 
        or new opportunities. Feel free to reach out!
      </p>
      <div class="flex justify-center gap-8">
        <a
          href="https://github.com/dantech2000"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 text-muted hover:text-primary dark:hover:text-blue-200 transition-colors"
        >
          <Icon name="tabler:brand-github" class="w-10 h-10" />
          <span class="text-lg font-medium">GitHub</span>
        </a>
        <a
          href="https://www.linkedin.com/in/dantech2000"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 text-muted hover:text-primary dark:hover:text-blue-200 transition-colors"
        >
          <Icon name="tabler:brand-linkedin" class="w-10 h-10" />
          <span class="text-lg font-medium">LinkedIn</span>
        </a>
        <a
          href={`mailto:${personalInfo.email}`}
          class="inline-flex items-center gap-2 text-muted hover:text-primary dark:hover:text-blue-200 transition-colors"
        >
          <Icon name="tabler:mail" class="w-10 h-10" />
          <span class="text-lg font-medium">Email</span>
        </a>
      </div>
    </div>
  </div>
</Layout>
